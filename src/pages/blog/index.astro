---
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';
import Default from '../../components/Default.astro';
import { motion } from 'framer-motion';

const posts = (await getCollection('blog')).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Default title='ismi-abbas.com' description="ismi-abbas's portfolio site">
    <section class='w-full text-slate-300'>
        <ul class='grid grid-cols-1 md:grid-cols-2 gap-5 auto-rows-fr'>
            {
                posts.map((post) => (
                    <motion.div
                        className='mt-2 h-auto hover:cursor-pointer hover:ring-1 hover:ring-sky-700 p-4 border border-slate-600/80'
                        initial={{ opacity: 0, y: 50 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 2, type: 'spring', stiffness: 300 }}
                        whileHover={{ scale: 1.03 }}
                        client:load>
                        <a href={`/blog/${post.slug}/`}>
                            <img src={post.data.heroImage} alt='' class='w-full h-48 object-cover' />
                            <div class='p-4'>
                                <h4 class='text-white font-base h-20 overflow-ellipsis block text-start '>
                                    {post.data.title}
                                </h4>
                                <FormattedDate date={post.data.pubDate} />
                            </div>
                        </a>
                    </motion.div>
                ))
            }
        </ul>
    </section>
</Default>
